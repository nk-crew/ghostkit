(()=>{"use strict";const t=window.wp.i18n;var e=window,i=e.grecaptcha,r=e.GHOSTKIT,o=r.googleReCaptchaAPISiteKey,s=r.events,a=".ghostkit-form-field-name-first, .ghostkit-form-field-name-last, .ghostkit-form-field-email-primary, .ghostkit-form-field-email-confirm, .ghostkit-form-field";function n(t,e){var i=t.closest(a);if(i){var r=i.querySelector(".ghostkit-form-field-error");r||((r=document.createElement("div")).classList.add("ghostkit-form-field-error"),i.append(r)),r.innerHTML=e,r.setAttribute("aria-hidden",!1),t.setAttribute("aria-invalid",!0)}}s.on(document,"init.blocks.gkt",(function(){document.querySelectorAll("form.ghostkit-form:not(.ghostkit-form-ready)").forEach((function(e){e.classList.add("ghostkit-form-ready"),e.setAttribute("novalidate",""),Array.from(e.elements).forEach((function(i){var r="";if("email"===i.type&&i.dataset.confirmEmail){var o=e.querySelector(i.dataset.confirmEmail);o&&(r=(0,t.__)("These emails should match.","ghostkit"),o.getAttribute("required")&&i.setAttribute("required",o.getAttribute("required")),s.on(o,"input",(function(){o.value?(i.setAttribute("pattern",o.value),i.setAttribute("required",!0)):(i.removeAttribute("pattern",o.value),o.getAttribute("required")?i.setAttribute("required",o.getAttribute("required")):i.removeAttribute("required"))})))}s.on(i,"invalid",(function(){r&&i.validity.patternMismatch?n(i,r):n(i,i.validationMessage)}))}))}))})),s.on(document,"submit",".ghostkit-form",(function(t){var e=t.delegateTarget;if(!e.checkValidity())return t.preventDefault(),e.classList.add("ghostkit-form-was-validated"),void e.querySelector(":invalid").focus();if(void 0!==i){if(e.classList.contains("ghostkit-form-processed"))return;var r=e.querySelector('[name="ghostkit_form_google_recaptcha"]');if(!r)return;if(t.preventDefault(),e.classList.contains("ghostkit-form-processing"))return;e.classList.add("ghostkit-form-processing"),i.ready((function(){i.execute(o,{action:"ghostkit"}).then((function(t){r.value=t,e.classList.add("ghostkit-form-processed"),e.submit(),e.classList.remove("ghostkit-form-processing","ghostkit-form-processed")}))}))}})),s.on(document,"blur",".ghostkit-form",(function(t){t.target.checkValidity()})),s.on(document,"input",".ghostkit-form",(function(t){var e=t.target;e.checkValidity()&&function(t){var e=t.closest(a).querySelector(".ghostkit-form-field-error");e&&(e.innerHTML="",e.setAttribute("aria-hidden",!0)),t.setAttribute("aria-invalid",!1)}(e)}))})();