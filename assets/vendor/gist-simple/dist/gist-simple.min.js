/*!
 * Gist Simple v2.0.1 (https://github.com/nk-o/gist-simple)
 * Copyright 2023 nK <https://nkdev.info>
 * Licensed under MIT (https://github.com/nk-o/gist-simple/blob/master/LICENSE)
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).gistSimple=t()}(this,(function(){"use strict";let e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t=e;function n(e,...t){return e=e||{},Object.keys(t).forEach((n=>{t[n]&&Object.keys(t[n]).forEach((o=>{e[o]=t[n][o]}))})),e}function o(){this.doneCallbacks=[],this.failCallbacks=[]}o.prototype={execute(e,t){let n=e.length;for(t=Array.prototype.slice.call(t);n;)n-=1,e[n].apply(null,t)},resolve(...e){this.execute(this.doneCallbacks,e)},reject(...e){this.execute(this.failCallbacks,e)},done(e){this.doneCallbacks.push(e)},fail(e){this.failCallbacks.push(e)}};const i="__gist_simple_jsonp__";const s="__gist_simple_css_loaded__";var l={id:"",file:"",caption:"",lines:"",linesExpanded:!1,highlightLines:"",showFooter:!0,showLineNumbers:!0,enableCache:!0,onInit:null,onInitEnd:null,onDestroy:null,onDestroyEnd:null,onAjaxBeforeSend:null,onAjaxSuccess:null,onAjaxLoaded:null};const r={};let c=0;class a{constructor(e,t){const o=this;o.instanceID=c,c+=1,o.$container=e,o.defaults={...l};const i=o.$container.dataset||{},s={};Object.keys(i).forEach((e=>{e&&void 0!==o.defaults[e]&&(s[e]=i[e])})),o.options=n({},o.defaults,s,t),o.pureOptions=n({},o.options),Object.keys(o.options).forEach((e=>{"true"===o.options[e]?o.options[e]=!0:"false"===o.options[e]&&(o.options[e]=!1)})),o.init()}init(){const e=this,{options:t}=e,n=`https://gist.github.com/${t.id}.json`,{lines:l}=t,c={};if(e.options.onInit&&e.options.onInit.call(e),t.file&&(c.file=t.file),e.$container.classList.add("gist-simple"),!t.id)return void e.insertContent("Gist ID is required",!0);const a=n+t.file,d=t.enableCache||r[a];function p(n){const o=document.createElement("div");o.innerHTML=n.div,o.firstChild&&o.firstChild.removeAttribute("id"),e.insertContent(o.innerHTML),e.highlightLines(t.highlightLines),e.showSpecificLines(l,t.linesExpanded),e.showCaption(t.caption),t.showFooter||e.removeFooter(),t.showLineNumbers||e.removeLineNumbers(),e.options.onAjaxLoaded&&e.options.onAjaxLoaded.call(e,n)}function u(t){if(t&&t.div){let{stylesheet:n}=t;n?(0===n.indexOf("<link")?(n=n.replace(/\\/g,"").match(/href="([^\s]*)"/),[n]=n):0!==n.indexOf("http")&&(0!==n.indexOf("/")&&(n=`/${n}`),n=`https://gist.github.com${n}`),function(e,t,n=document){let o=n.body.querySelector(`link[href="${e}"]`);if(o||(o=n.createElement("link"),o.href=e,o.rel="stylesheet",o.type="text/css",n.head.appendChild(o)),t){if(o[s])return void t(o);o.addEventListener("load",(()=>{o[s]=!0,t(o)}),!1)}}(n,(()=>{p(t)}),e.$container.ownerDocument)):p(t)}else e.insertContent(`Failed loading gist ${n}`,!0)}function f(t){e.insertContent(`Failed loading gist ${n}: ${t}`,!0)}e.insertContent('<span class="gist-simple-loading-icon"><i></i><i></i><i></i></span>',!0),function(e,t){const{data:n={},beforeSend:o,success:s}=t;if(window[i]=(window[i]||0)+1,n.callback=`${i}_cb_${window[i]}`,Object.keys(n).forEach((t=>{e.match(/\?/)?e+=`&${t}=${n[t]}`:e+=`?${t}=${n[t]}`})),o&&!o())return;let l=document.createElement("script");l.type="text/javascript",l.src=e,window[n.callback]=function(e){s.call(window,e),document.head.removeChild(l),l=null,delete window[n.callback]},document.head.appendChild(l)}(n,{data:c,beforeSend(){if(e.options.onAjaxBeforeSend&&e.options.onAjaxBeforeSend.call(e),d){if(r[a])return r[a].div?(u(r[a]),!1):(r[a].done((e=>{u(e)})),r[a].fail((e=>{f(e)})),!1);r[a]=new o}return!0},success(t){e.options.onAjaxSuccess&&e.options.onAjaxSuccess.call(e,t),d&&r[a]&&r[a].resolve&&(r[a].resolve(t),r[a]=t),u(t)},error(e){f(e)}}),e.options.onInitEnd&&e.options.onInitEnd.call(e)}destroy(){const e=this;e.options.onDestroy&&e.options.onDestroy.call(e),e.$container.innerHTML="",delete e.$container.GistSimple,e.options.onDestroyEnd&&e.options.onDestroyEnd.call(e)}chunkBy(e,t){return 0===e.length?[]:e.slice(1).reduce(((e,n)=>(t(n)?e.push([n]):e.push(e.pop().concat([n])),e)),[e.slice(0,1)])}getLineNumbers(e){const t=[];let n,o;if("number"==typeof e)t.push(e);else{o=e.split(",");for(let e=0;e<o.length;e+=1)if(n=o[e].split("-"),2===n.length)for(let e=parseInt(n[0],10);e<=n[1];e+=1)t.push(e);else 1===n.length&&t.push(parseInt(n[0],10))}return t}insertContent(e,t=!1){t&&(e=`<div class="gist-simple-wrap">${e}</div>`),this.$container.innerHTML=e}highlightLines(e){if(!e)return;const t=this.getLineNumbers(e);this.$container.querySelectorAll("td.line-data").forEach((e=>{e.style.width="100%"})),this.$container.querySelectorAll(".js-file-line").forEach(((e,n)=>{-1!==t.indexOf(n+1)&&(e.style.backgroundColor="rgb(255, 255, 204)")}))}showSpecificLines(e,t){if(!e)return;const n=this.getLineNumbers(e),o=[];if(this.$container.querySelectorAll(".js-file-line").forEach(((e,i)=>{-1===n.indexOf(i+1)&&(t?(o.push(i+1),e.parentNode.style.display="none"):e.parentNode.remove())})),t){this.chunkBy(o,(e=>!o.includes(e-1))).forEach((e=>{const t=e[0],n=t-1,o=e[e.length-1],i=document.createElement("a");i.setAttribute("lines",e.join()),i.style.display="block",i.style.cursor="pointer",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 44" style="height: 15px; position: relative; top: 2px;">\n  <path fill="#bbb" fill-rule="evenodd"\n    d="M8.0066 16.05305v-7.6523c0-.82422-.47656-1.0273-1.0586-.4414l-3.5117 3.5039c-1.8789 1.875-4.6953-.94142-2.8164-2.8164L8.7215.61564c.68359-.67579 1.8008-.6797 2.4922 0l8.1641 8.0312c1.8789 1.875-.9375 4.6914-2.8164 2.8164l-3.5078-3.5039c-.58984-.58985-1.0625-.38673-1.0625.4414v27.30827c0 .82031.47656 1.0273 1.0586.44141l3.5117-3.5039c1.8789-1.875 4.6953.9375 2.8164 2.8164l-8.1016 8.0273c-.6836.6797-1.8008.6797-2.4922 0l-8.1641-8.0273c-1.8789-1.8789.9375-4.6914 2.8164-2.8164l3.5078 3.5039c.58984.58984 1.0625.38672 1.0625-.4414V16.05304z" />\n</svg>',i.addEventListener("click",(e=>{e.preventDefault(),i.closest("table.highlight").querySelectorAll('tr[style*="display: none"] td[data-line-number]').forEach((function(e){const t=i.getAttribute("lines").split(","),n=e.getAttribute("data-line-number");-1!==t.indexOf(n)&&(e.parentNode.style.display="")})),i.closest("tr").remove()}));const s=`\n          <td\n            class="blob-code blob-code-inner js-file-line collapsed"\n            style="background-color: #f9f9f9; color: #999; font-size: 12px; font-style: italic; padding-top: 5px !important; padding-bottom: 5px !important;"\n          >... Lines ${t} - ${o}</td>\n        `,l=document.createElement("tr");l.innerHTML='\n          <td\n            class="blob-num js-line-number collapsed"\n            style="background-color: #f9f9f9; color: #999; font-size: 12px; font-style: italic; text-align: center; padding-top: 5px !important; padding-bottom: 5px !important;"\n          >\x3c!-- Icon Here --\x3e</td>\n        '+s,l.querySelector("td:first-child").append(i);const r=this.$container.querySelector(`.js-line-number[data-line-number="${0===n?1:n}"]`);r&&(0===n?r.parentElement.before(l):r.parentElement.after(l))}))}}showCaption(e){if(!e)return;const t=this.$container.querySelector("table tbody"),n=document.createElement("tr"),o=document.createElement("td");o.setAttribute("style","padding: 10px !important; border-bottom: 10px solid white; background-color: #f9f9f9; font-weight: bold;"),o.innerHTML=e;const i=document.createElement("td");i.setAttribute("style","background-color: #f9f9f9; border-bottom: 10px solid white;"),n.append(i),n.append(o),t.prepend(n)}removeFooter(){this.$container.querySelector(".gist-meta").remove(),this.$container.querySelector(".gist-data").style.borderBottom="0px",this.$container.querySelector(".gist-file").style.borderBottom="1px solid #ddd"}removeLineNumbers(){this.$container.querySelectorAll(".js-line-number").forEach((e=>{e.remove()})),this.$container.querySelector("table.highlight").style.width="100%"}}const d=function(e,t,...n){("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)&&(e=[e]);const o=e.length;let i,s=0;for(;s<o;s+=1)if("object"==typeof t||void 0===t?e[s].GistSimple||(e[s].GistSimple=new a(e[s],t)):e[s].GistSimple&&(i=e[s].GistSimple[t].apply(e[s].GistSimple,n)),void 0!==i)return i;return e};d.constructor=a;const p=t.jQuery;if(void 0!==p){const e=function(...e){Array.prototype.unshift.call(e,this);const n=d.apply(t,e);return"object"!=typeof n?n:this};e.constructor=d.constructor;const n=p.fn.gistSimple;p.fn.gistSimple=e,p.fn.gistSimple.noConflict=function(){return p.fn.gistSimple=n,this}}var u;return u=()=>{d(document.querySelectorAll(".gist-simple[data-id]"))},"complete"===document.readyState||"interactive"===document.readyState?u():document.addEventListener("DOMContentLoaded",u,{capture:!0,once:!0,passive:!0}),d}));//# sourceMappingURL=gist-simple.min.js.map
